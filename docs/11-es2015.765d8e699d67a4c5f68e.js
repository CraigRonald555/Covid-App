(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{RmqX:function(t,e,n){"use strict";n.r(e),n.d(e,"SearchPageModule",(function(){return p}));var r=n("ofXK"),i=n("3Pt+"),o=n("TEn/"),s=n("tyNb"),u=n("mrSG"),c=n("fXoL"),a=n("tk/3"),l=n("yTNM");let f=(()=>{class t{transform(e,n){return n&&e?t.filter(e,n):e}static filter(t,e){const n=e.toLowerCase();return t.filter((function(t){return function t(e,r){for(let i in e)if(null!==e[i]&&null!=e[i]){if("object"==typeof e[i]&&t(e[i],r))return!0;if(e[i].toString().toLowerCase().includes(n))return!0}return!1}(t,e)}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c.Gb({name:"filter",type:t,pure:!1}),t.\u0275prov=c.Db({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)}}),t})();function d(t,e){if(1&t&&(c.Mb(0,"ion-item",6),c.Mb(1,"ion-label"),c.hc(2),c.Lb(),c.Lb()),2&t){const t=e.$implicit;c.bc("routerLink","../country/",t.Country,""),c.xb(2),c.ic(t.Country)}}const h=[{path:"",component:(()=>{class t{constructor(t,e){this.http=t,this.apiService=e}ngOnInit(){return Object(u.a)(this,void 0,void 0,(function*(){yield this.apiService.retrieveCountries(),this.countriesList=this.apiService.countriesList}))}}return t.\u0275fac=function(e){return new(e||t)(c.Hb(a.a),c.Hb(l.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-search"]],decls:12,vars:5,consts:[["color","secondary"],["slot","start"],[1,"ion-text-center"],[1,"ion-padding"],[3,"ngModel","ngModelChange"],["detail","",3,"routerLink",4,"ngFor","ngForOf"],["detail","",3,"routerLink"]],template:function(t,e){1&t&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar",0),c.Mb(2,"ion-buttons",1),c.Ib(3,"ion-back-button"),c.Lb(),c.Mb(4,"ion-title",2),c.hc(5,"Countries"),c.Lb(),c.Lb(),c.Lb(),c.Mb(6,"ion-content",3),c.Mb(7,"ion-toolbar"),c.Mb(8,"ion-searchbar",4),c.Tb("ngModelChange",(function(t){return e.filterTerm=t})),c.Lb(),c.Lb(),c.Mb(9,"ion-list"),c.gc(10,d,3,2,"ion-item",5),c.Wb(11,"filter"),c.Lb(),c.Lb()),2&t&&(c.xb(8),c.ac("ngModel",e.filterTerm),c.xb(2),c.ac("ngForOf",c.Xb(11,2,e.countriesList,e.filterTerm)))},directives:[o.h,o.q,o.e,o.b,o.c,o.p,o.g,o.n,o.v,i.d,i.e,o.k,r.h,o.i,o.u,s.h,o.j],pipes:[f],styles:[""]}),t})()}];let m=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[s.i.forChild(h)],s.i]}),t})(),p=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(e){return new(e||t)},imports:[[r.b,i.a,o.r,m,b]]}),t})()},yTNM:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("mrSG"),i=n("fXoL"),o=n("tk/3");let s=(()=>{class t{constructor(t){this.http=t}retrieveSummary(){return Object(r.a)(this,void 0,void 0,(function*(){void 0===this.summaryData&&(this.summaryData=yield this.http.get("https://api.covid19api.com/summary").toPromise()),console.log(this.summaryData)}))}retrieveCountries(){return Object(r.a)(this,void 0,void 0,(function*(){console.log("Loading countries from API"),void 0===this.countriesList&&(this.countriesList=yield this.http.get("https://api.covid19api.com/countries").toPromise(),this.countriesList.sort((function(t,e){return t.Country<e.Country?-1:t.Country>e.Country?1:0})))}))}findHighestNewCases(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.retrieveSummary();const t=this.summaryData.Countries.sort((t,e)=>e.NewConfirmed-t.NewConfirmed).slice(0,5),e=[];return t.forEach(t=>{e.push({country:t.Country,newCases:t.NewConfirmed})}),console.log(t),console.log(e),e}))}findCountryInSummary(t){return Object(r.a)(this,void 0,void 0,(function*(){return yield this.retrieveSummary(),this.summaryData.Countries.find(e=>e.Country===t)}))}findSlugByCountryName(t){return Object(r.a)(this,void 0,void 0,(function*(){return yield this.retrieveCountries(),this.summaryData.Countries.find(e=>e.Country===t).Slug}))}getPast7DaysNewCases(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=yield this.http.get("https://api.covid19api.com/total/country/"+t).toPromise();console.log(e);const n=e.splice(Math.max(e.length-8,0));console.log(n);let r=[];return n.forEach((t,e)=>{let i,o;e>0&&(i=t.Date,i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(i.substring(5,7))-1]+" "+i.substring(8,10),o=t.Confirmed-n[e-1].Confirmed,r.push({day:i,newCases:o}))}),console.log(r),r}))}}return t.\u0275fac=function(e){return new(e||t)(i.Pb(o.a))},t.\u0275prov=i.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);