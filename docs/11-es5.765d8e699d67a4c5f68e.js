!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{RmqX:function(e,r,i){"use strict";i.r(r),i.d(r,"SearchPageModule",(function(){return L}));var o,u,a=i("ofXK"),s=i("3Pt+"),c=i("TEn/"),f=i("tyNb"),p=i("mrSG"),h=i("fXoL"),m=i("tk/3"),b=i("yTNM"),l=((u=function(){function e(){t(this,e)}return n(e,[{key:"transform",value:function(t,n){return n&&t?e.filter(t,n):t}}],[{key:"filter",value:function(t,e){var n=e.toLowerCase();return t.filter((function(t){return function t(e,r){for(var i in e)if(null!==e[i]&&null!=e[i]){if("object"==typeof e[i]&&t(e[i],r))return!0;if(e[i].toString().toLowerCase().includes(n))return!0}return!1}(t,e)}))}}]),e}()).\u0275fac=function(t){return new(t||u)},u.\u0275pipe=h.Gb({name:"filter",type:u,pure:!1}),u.\u0275prov=h.Db({token:u,factory:u.\u0275fac}),u),d=((o=function e(){t(this,e)}).\u0275mod=h.Fb({type:o}),o.\u0275inj=h.Eb({factory:function(t){return new(t||o)}}),o);function v(t,e){if(1&t&&(h.Mb(0,"ion-item",6),h.Mb(1,"ion-label"),h.hc(2),h.Lb(),h.Lb()),2&t){var n=e.$implicit;h.bc("routerLink","../country/",n.Country,""),h.xb(2),h.ic(n.Country)}}var y,g,w,C=[{path:"",component:(y=function(){function e(n,r){t(this,e),this.http=n,this.apiService=r}return n(e,[{key:"ngOnInit",value:function(){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiService.retrieveCountries();case 2:this.countriesList=this.apiService.countriesList;case 3:case"end":return t.stop()}}),t,this)})))}}]),e}(),y.\u0275fac=function(t){return new(t||y)(h.Hb(m.a),h.Hb(b.a))},y.\u0275cmp=h.Bb({type:y,selectors:[["app-search"]],decls:12,vars:5,consts:[["color","secondary"],["slot","start"],[1,"ion-text-center"],[1,"ion-padding"],[3,"ngModel","ngModelChange"],["detail","",3,"routerLink",4,"ngFor","ngForOf"],["detail","",3,"routerLink"]],template:function(t,e){1&t&&(h.Mb(0,"ion-header"),h.Mb(1,"ion-toolbar",0),h.Mb(2,"ion-buttons",1),h.Ib(3,"ion-back-button"),h.Lb(),h.Mb(4,"ion-title",2),h.hc(5,"Countries"),h.Lb(),h.Lb(),h.Lb(),h.Mb(6,"ion-content",3),h.Mb(7,"ion-toolbar"),h.Mb(8,"ion-searchbar",4),h.Tb("ngModelChange",(function(t){return e.filterTerm=t})),h.Lb(),h.Lb(),h.Mb(9,"ion-list"),h.gc(10,v,3,2,"ion-item",5),h.Wb(11,"filter"),h.Lb(),h.Lb()),2&t&&(h.xb(8),h.ac("ngModel",e.filterTerm),h.xb(2),h.ac("ngForOf",h.Xb(11,2,e.countriesList,e.filterTerm)))},directives:[c.h,c.q,c.e,c.b,c.c,c.p,c.g,c.n,c.v,s.d,s.e,c.k,a.h,c.i,c.u,f.h,c.j],pipes:[l],styles:[""]}),y)}],k=((w=function e(){t(this,e)}).\u0275mod=h.Fb({type:w}),w.\u0275inj=h.Eb({factory:function(t){return new(t||w)},imports:[[f.i.forChild(C)],f.i]}),w),L=((g=function e(){t(this,e)}).\u0275mod=h.Fb({type:g}),g.\u0275inj=h.Eb({factory:function(t){return new(t||g)},imports:[[a.b,s.a,c.r,k,d]]}),g)},yTNM:function(e,r,i){"use strict";i.d(r,"a",(function(){return s}));var o=i("mrSG"),u=i("fXoL"),a=i("tk/3"),s=function(){var e=function(){function e(n){t(this,e),this.http=n}return n(e,[{key:"retrieveSummary",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=void 0===this.summaryData,!t.t0){t.next=5;break}return t.next=4,this.http.get("https://api.covid19api.com/summary").toPromise();case 4:this.summaryData=t.sent;case 5:console.log(this.summaryData);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"retrieveCountries",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Loading countries from API"),t.t0=void 0===this.countriesList,!t.t0){t.next=7;break}return t.next=5,this.http.get("https://api.covid19api.com/countries").toPromise();case 5:this.countriesList=t.sent,this.countriesList.sort((function(t,e){return t.Country<e.Country?-1:t.Country>e.Country?1:0}));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"findHighestNewCases",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.retrieveSummary();case 2:return e=this.summaryData.Countries.sort((function(t,e){return e.NewConfirmed-t.NewConfirmed})).slice(0,5),n=[],t.abrupt("return",(e.forEach((function(t){n.push({country:t.Country,newCases:t.NewConfirmed})})),console.log(e),console.log(n),n));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"findCountryInSummary",value:function(t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.retrieveSummary();case 2:return e.abrupt("return",this.summaryData.Countries.find((function(e){return e.Country===t})));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"findSlugByCountryName",value:function(t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.retrieveCountries();case 2:return e.abrupt("return",this.summaryData.Countries.find((function(e){return e.Country===t})).Slug);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getPast7DaysNewCases",value:function(t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("https://api.covid19api.com/total/country/"+t).toPromise();case 2:return n=e.sent,console.log(n),r=n.splice(Math.max(n.length-8,0)),console.log(r),i=[],e.abrupt("return",(r.forEach((function(t,e){var n,o;e>0&&(n=t.Date,n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(n.substring(5,7))-1]+" "+n.substring(8,10),o=t.Confirmed-r[e-1].Confirmed,i.push({day:n,newCases:o}))})),console.log(i),i));case 8:case"end":return e.stop()}}),e,this)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Pb(a.a))},e.\u0275prov=u.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();